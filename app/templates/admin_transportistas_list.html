{% extends "base_admin.html" %}
{% block title %}Transportistas | Admin{% endblock %}

{% block content %}
<div class="bg-white border rounded-xl shadow p-5">
  <div class="flex items-center justify-between mb-4">
    <h1 class="text-xl font-semibold">Transportistas</h1>
    <a href="/admin/transportistas/nuevo"
       class="px-3 py-2 text-sm rounded bg-green-600 text-white hover:bg-green-700">
      Nuevo transportista
    </a>
  </div>

  <table class="min-w-full text-sm">
    <thead>
      <tr class="text-left text-gray-500 border-b">
        <th class="py-2 pr-4">ID</th>
        <th class="py-2 pr-4">Nombre</th>
        <th class="py-2 pr-4">RUT</th>
        <th class="py-2 pr-4">Fono</th>
        <th class="py-2 pr-4">Email</th>
        <th class="py-2 pr-4">Usuario</th>
        <th class="py-2 pr-4">Activo</th>
        <th class="py-2 pr-4">Creado</th>
        <th class="py-2 pr-4 text-right">Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for t in rows %}
      <tr class="border-b hover:bg-gray-50">
        <td class="py-2 pr-4">{{ t.id_transportista }}</td>
        <td class="py-2 pr-4 font-medium">{{ t.nombre }}</td>
        <td class="py-2 pr-4">{{ t.rut or '—' }}</td>
        <td class="py-2 pr-4">{{ t.fono or '—' }}</td>
        <td class="py-2 pr-4">{{ t.email or '—' }}</td>
        <td class="py-2 pr-4">{{ t.usuario or '—' }}</td>
        <td class="py-2 pr-4">
          {% if t.activo %}
            <span class="px-2 py-0.5 text-xs rounded bg-green-100 text-green-800">Activo</span>
          {% else %}
            <span class="px-2 py-0.5 text-xs rounded bg-gray-200 text-gray-700">Inactivo</span>
          {% endif %}
        </td>
        <td class="py-2 pr-4">{{ t.creado_en }}</td>
        <td class="py-2 pr-0 text-right">
          <a href="/admin/transportistas/{{ t.id_transportista }}/editar"
             class="px-2 py-1 text-xs border rounded hover:bg-gray-50">Editar</a>
          <form method="post" action="/admin/transportistas/{{ t.id_transportista }}/toggle"
                class="inline">
            <button class="px-2 py-1 text-xs border rounded ml-1
                           {{ 'bg-red-50 hover:bg-red-100' if t.activo else 'bg-green-50 hover:bg-green-100' }}">
              {{ 'Desactivar' if t.activo else 'Activar' }}
            </button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="9" class="py-6 text-center text-gray-500">Sin transportistas.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
