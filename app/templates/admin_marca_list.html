{% extends "base_admin.html" %}
{% block title %}Marcas · Admin{% endblock %}
{% block content %}
<div class="max-w-5xl mx-auto p-6">
  <div class="flex items-center justify-between mb-4">
    <h1 class="text-xl font-semibold">Marcas</h1>
    <a href="/admin/marcas/nueva" class="px-3 py-2 bg-green-600 text-white rounded-lg">Nueva</a>
  </div>
  <div class="bg-white border rounded-lg overflow-hidden">
    <table class="min-w-full text-sm">
      <thead class="bg-gray-50">
        <tr>
          <th class="px-3 py-2 text-left">Logo</th>
          <th class="px-3 py-2 text-left">Nombre</th>
          <th class="px-3 py-2 text-left">Slug</th>
          <th class="px-3 py-2 text-center">Visible</th>
          <th class="px-3 py-2 text-center">Orden</th>
          <th class="px-3 py-2"></th>
        </tr>
      </thead>
      <tbody>
        {% for r in rows %}
        <tr class="border-t">
          <td class="px-3 py-2">
            {% if r.logo_url %}
              <img src="{{ r.logo_url }}" alt="{{ r.nombre }}"
                   class="h-8 w-auto object-contain bg-white border rounded p-0.5">
            {% else %}
              <span class="text-gray-400">—</span>
            {% endif %}
          </td>
          <td class="px-3 py-2">{{ r.nombre }}</td>
          <td class="px-3 py-2 text-gray-600">{{ r.slug }}</td>
          <td class="px-3 py-2 text-center">{{ 'Sí' if r.visible else 'No' }}</td>
          <td class="px-3 py-2 text-center">{{ r.orden }}</td>
          <td class="px-3 py-2 text-right">
            <form action="/admin/marcas/{{ r.id }}/toggle" method="post" class="inline">
              <button class="px-2 py-1 text-sm {{ 'text-gray-600' if r.visible else 'text-green-700' }}"
                      title="{{ 'Ocultar' if r.visible else 'Publicar' }}">
                {{ 'Ocultar' if r.visible else 'Publicar' }}
              </button>
            </form>

            <a href="/admin/marcas/{{ r.id }}/editar" class="px-2 py-1 text-blue-700">Editar</a>

            <form action="/admin/marcas/{{ r.id }}/eliminar" method="post" class="inline"
                  onsubmit="return confirm('¿Eliminar esta marca?');">
              <button class="px-2 py-1 text-red-700" type="submit">Eliminar</button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr>
          <td class="px-3 py-4 text-gray-500 text-center" colspan="6">No hay marcas.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
